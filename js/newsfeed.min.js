function loadMoreNews(){var e="https://newsapi.org/v2/everything?sources=business-insider,bloomberg,the-wall-street-journal,cnbc,ars-technica,crypto-coins-news,engadget,recode,techradar,the-verge,wired,techcrunch,the-next-web,hacker-news,abc-news,cnn,associated-press,the-washington-post,the-huffington-post,usa-today&page="+page+"&q=Cryptocurrency+Investing&from="+year+"-"+month+"-"+day+"&sortBy=popularity&language=en&apiKey=5448d59885724ecf9e865df785bbb667",t="http://www.simpleticker.com/json/news.json";$.getJSON(e,function(e){console.log("Fetched newsfeed"),createArticleList(e),PAGE_LIM=Math.min(PAGE_LIM,Math.floor(e.totalResults/20)+1),newsload=!0}).fail(function(){1==page?$.getJSON(t,function(e){console.log("Using cached newsfeed"),createArticleList(e),newsload=!0}).fail(function(){console.log("Failed to load cached newsfeed"),showErrorLoadingNews(),newsload=!0}):console.log("Failed to load newsfeed for page "+page)})}function showErrorLoadingNews(){$("#newsfeed").html("<div class='article borderless'><div class='article-title'>Error loading newsfeed.<br><br>If this problem is persistent, please email us at <a target='_blank' href='mailto:bugs@simpleticker.com'>bugs@simpleticker.com</a>.</div></div>")}function createArticleList(e){for(var t="",a=0;a<e.articles.length;a++){var s="";s+="<div class='article border-bottom'>",s+="<a target='_blank' href='",s+=e.articles[a].url,s+="' title='",s+=e.articles[a].description,s+="'>",s+="<div class='article-title'>",s+=e.articles[a].title,s+="</div></a><div class='article-meta'><span class='article-sitename'>",s+=e.articles[a].source.name,s+="</span>&nbsp&nbsp<span class='article-time'>",s+=convertTimestampToLocaleString(e.articles[a].publishedAt),s+="</span></div></div>",s+="",t+=s}$("#newsfeed").html(document.getElementById("newsfeed").innerHTML+t)}function convertTimestampToLocaleString(e){return new Date(e).toLocaleString("en-US")}var dateObj=new Date;dateObj.setDate(dateObj.getDate()-20);var month=dateObj.getUTCMonth()+1,day=dateObj.getUTCDate(),year=dateObj.getUTCFullYear(),page=1,newsload=!1,PAGE_LIM=10;loadMoreNews(),jQuery(function(e){e("#sidebar").on("scroll",function(){e(this).scrollTop()+e(this).innerHeight()>=e(this)[0].scrollHeight&&newsload&&PAGE_LIM>=page&&(page++,loadMoreNews())})});
