function startUp(){checkCookies(),setHandlers(),resetIntervalsAndUpdateBoth()}function setHandlers(){$(window).resize(function(){resetIntervalsAndUpdateCharts()}),$("#candle").click(function(){CHART_TYPE="candle",$("#activechart").html("Chart: Candlestick"),resetIntervalsAndUpdateCharts(),setCookie("CHART_TYPE","#candle")}),$("#line").click(function(){CHART_TYPE="line",$("#activechart").html("Chart: Line"),resetIntervalsAndUpdateCharts(),setCookie("CHART_TYPE","#line")}),$("#combo").click(function(){CHART_TYPE="both",$("#activechart").html("Chart: Combo"),resetIntervalsAndUpdateCharts(),setCookie("CHART_TYPE","#combo")}),$("#hour").click(function(){GRANULARITY=GRAN_HOUR,$("#activet").html("Interval: 1 Hour"),$("span.interval").html("1H"),resetIntervalsAndUpdateCharts(),setCookie("GRANULARITY","#hour")}),$("#day").click(function(){GRANULARITY=GRAN_DAY,$("#activet").html("Interval: 1 Day"),$("span.interval").html("1D"),resetIntervalsAndUpdateCharts(),setCookie("GRANULARITY","#day")}),$("#week").click(function(){GRANULARITY=GRAN_WEEK,$("#activet").html("Interval: 1 Week"),$("span.interval").html("1W"),resetIntervalsAndUpdateCharts(),setCookie("GRANULARITY","#week")}),$("#month").click(function(){GRANULARITY=GRAN_MONTH,$("#activet").html("Interval: 1 Month"),$("span.interval").html("1M"),resetIntervalsAndUpdateCharts(),setCookie("GRANULARITY","#month")}),$("#year").click(function(){GRANULARITY=GRAN_YEAR,$("#activet").html("Interval: 1 Year"),$("span.interval").html("1Y"),resetIntervalsAndUpdateCharts(),setCookie("GRANULARITY","#year")}),$("#alltime").click(function(){GRANULARITY=GRAN_ALL_TIME,$("#activet").html("Interval: All Time"),$("span.interval").html("ALL"),resetIntervalsAndUpdateCharts(),setCookie("GRANULARITY","#alltime")}),$("#cusd").click(function(){HOME_CURRENCY="USD",$("#activec").html(HOME_CURRENCY),resetIntervalsAndUpdateBoth(),setCookie("HOME_CURRENCY","#cusd")}),$("#ceur").click(function(){HOME_CURRENCY="EUR",$("#activec").html(HOME_CURRENCY),resetIntervalsAndUpdateBoth(),setCookie("HOME_CURRENCY","#ceur")}),$("#cgbp").click(function(){HOME_CURRENCY="GBP",$("#activec").html(HOME_CURRENCY),resetIntervalsAndUpdateBoth(),setCookie("HOME_CURRENCY","#cgbp")})}function checkCookies(){if(hasCookie("GRANULARITY")){var t=getCookie("GRANULARITY");"#hour"==t?(GRANULARITY=GRAN_HOUR,$("#activet").html("Interval: 1 Hour"),$("span.interval").html("1H")):"#day"==t?(GRANULARITY=GRAN_DAY,$("#activet").html("Interval: 1 Day"),$("span.interval").html("1D")):"#week"==t?(GRANULARITY=GRAN_WEEK,$("#activet").html("Interval: 1 Week"),$("span.interval").html("1W")):"#month"==t?(GRANULARITY=GRAN_MONTH,$("#activet").html("Interval: 1 Month"),$("span.interval").html("1M")):"#year"==t?(GRANULARITY=GRAN_YEAR,$("#activet").html("Interval: 1 Year"),$("span.interval").html("1Y")):"#alltime"==t&&(GRANULARITY=GRAN_ALL_TIME,$("#activet").html("Interval: All Time"),$("span.interval").html("ALL"))}if(hasCookie("HOME_CURRENCY")){var e=getCookie("HOME_CURRENCY");"#cusd"==e?HOME_CURRENCY="USD":"#ceur"==e?HOME_CURRENCY="EUR":"#cgbp"==e&&(HOME_CURRENCY="GBP"),$("#activec").html(HOME_CURRENCY)}if(hasCookie("CHART_TYPE")){var a=getCookie("CHART_TYPE");"#candle"==a?(CHART_TYPE="candle",$("#activechart").html("Chart: Candlestick")):"#line"==a?(CHART_TYPE="line",$("#activechart").html("Chart: Line")):"#combo"==a&&(CHART_TYPE="both",$("#activechart").html("Chart: Combo"))}}function resetIntervalsAndUpdateBoth(){resetIntervalsAndUpdateCharts(),resetIntervalsAndUpdatePrices()}function resetIntervalsAndUpdatePrices(){clearInterval(pageInt),updatePage(!0),pageInt=setInterval(function(){updatePage(!1)},INTERVAL_PRICES)}function resetIntervalsAndUpdateCharts(){clearInterval(chartInt),updateCharts(!0),chartInt=setInterval(function(){updateCharts(!1)},INTERVAL_CHARTS)}function updateCoin(t,e){var a=2;"ltc"!=t&&"eth"!=t||"GBP"!=e||(e="BTC",a=7),$.getJSON("https://api.gdax.com/products/"+t+"-"+e+"/ticker",function(r){var o=new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:a,maximumFractionDigits:a});$("#"+t+"price").html(o.format(r.price)),"btc"==t&&(document.title=o.format(r.price)+"-BTC | Simple Ticker")}).fail(function(){console.log("Too many requests to GDAX API")})}function changeColor(t,e){$("#"+t).removeClass("red"),$("#"+t).removeClass("green"),e>=0?$("#"+t).addClass("green"):$("#"+t).addClass("red")}function updatePage(t){times=1,t&&(times=3);for(var e=0;e<times;e++)++CURRENT_COIN_NUM>3&&(CURRENT_COIN_NUM=1),1==CURRENT_COIN_NUM?updateCoin("btc",HOME_CURRENCY):2==CURRENT_COIN_NUM?updateCoin("eth",HOME_CURRENCY):updateCoin("ltc",HOME_CURRENCY)}function updateCharts(t){drawChart("btc",HOME_CURRENCY,t),drawChart("eth",HOME_CURRENCY,t),drawChart("ltc",HOME_CURRENCY,t)}function updatePChange(t,e){var a=$("#"+t+"price").text().replace(/[^0-9\.-]+/g,"");if("..."!=a){var r=Number(a)/e-1;$("#"+t+"open").html(percentFormatter.format(r)),changeColor(t+"price",r),changeColor(t+"open",r)}else callback[t]&&(callback[t]=!1,setTimeout(function(){callback[t]=!0,updatePChange(t,e)},100))}function drawChart(t,e,a){a&&(document.getElementById(t+"chart").innerHTML=" Loading...",$("#"+t+"open").html("..."),$("#"+t+"high").html("..."),$("#"+t+"low").html("..."),$("#"+t+"open").removeClass("red"),$("#"+t+"open").removeClass("green"));var r=2;"ltc"!=t&&"eth"!=t||"GBP"!=e||(e="BTC",r=7);var o;GRANULARITY==GRAN_HOUR?o="https://min-api.cryptocompare.com/data/histominute?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=60&aggregate=1&e=GDAX":GRANULARITY==GRAN_DAY?o="https://min-api.cryptocompare.com/data/histominute?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=72&aggregate=20&e=GDAX":GRANULARITY==GRAN_WEEK?o="https://min-api.cryptocompare.com/data/histohour?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=84&aggregate=2&e=GDAX":GRANULARITY==GRAN_MONTH?o="https://min-api.cryptocompare.com/data/histohour?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=72&aggregate=10&e=GDAX":GRANULARITY==GRAN_YEAR?o="https://min-api.cryptocompare.com/data/histoday?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=73&aggregate=5&e=GDAX":GRANULARITY==GRAN_ALL_TIME&&(o="https://min-api.cryptocompare.com/data/histoday?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=75&aggregate=16&e=GDAX"),$.getJSON(o,function(a){if("Success"!=a.Response)return void console.log("Chart API Call Failed: "+a.Response);var o=Math.max(10,7500/$(document).width()),l=new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:r,maximumFractionDigits:r});console.log("Rendering "+t.toUpperCase()+"-"+e.toUpperCase());var n=[];"both"==CHART_TYPE?n[0]=["Date","Low","Open","Close","High","Tooltip","Close"]:"candle"==CHART_TYPE?n[0]=["Date","Low","Open","Close","High","Tooltip"]:"line"==CHART_TYPE&&(n[0]=["Date","Close"]);var i,c;c=a.Data[0].low,i=a.Data[0].high;for(var s=1;s<1+a.Data.length;s++){var C=a.Data[s-1].time,R=a.Data[s-1].low;c=Math.min(c,R);var h=a.Data[s-1].high;i=Math.max(i,h);var A=a.Data[s-1].open,m=a.Data[s-1].close;a.Data[s-1].volumeto;"both"==CHART_TYPE?n[s]=[0,0,0,0,0,0,0]:"candle"==CHART_TYPE?n[s]=[0,0,0,0,0,0]:"line"==CHART_TYPE&&(n[s]=[0,0]),n[s][0]=new Date(1e3*C),"both"==CHART_TYPE||"candle"==CHART_TYPE?(n[s][1]=R,n[s][2]=A,n[s][3]=m,n[s][4]=h,n[s][5]=n[s][0].toLocaleString()+": "+l.format(n[s][3]),"both"==CHART_TYPE&&(n[s][6]=m)):"line"==CHART_TYPE&&(n[s][1]=m)}$("#"+t+"high").html(l.format(i)),$("#"+t+"low").html(l.format(c));var p;"USD"==e?p="$#,###.##":"EUR"==e?p="€#,###.##":"GBP"==e?p="£#,###.##":"BTC"==e&&(p="BTC#,###.#######");var d=google.visualization.arrayToDataTable(n,!1);if("both"==CHART_TYPE||"candle"==CHART_TYPE){d.setColumnProperty(5,"role","tooltip");var T={legend:"none",bar:{groupWidth:"100%"},colors:["lightgrey","#4c77b2"],candlestick:{fallingColor:{stroke:"black",strokeWidth:0,fill:"red"},risingColor:{stroke:"black",strokeWidth:0,fill:"green"}},chartArea:{left:o+"%",bottom:"10%",width:100-o-1+"%",height:"85%"},vAxis:{titleTextStyle:{color:"black"},gridlines:{color:"lightgrey"},textStyle:{color:"black"},titleTextStyle:{color:"black"},format:p},backgroundColor:"white",titleTextStyle:{color:"black"},fontName:"Consolas",hAxis:{logscale:!1,textStyle:{color:"black"},titleTextStyle:{color:"black"},gridlines:{color:"lightgrey",count:4},showTextEvery:1},crosshair:{trigger:"both"},seriesType:"candlesticks",series:{1:{type:"area"}}}}else if("line"==CHART_TYPE)var T={legend:"none",bar:{groupWidth:"100%"},colors:["#4c77b2"],candlestick:{fallingColor:{stroke:"black",strokeWidth:0,fill:"red"},risingColor:{stroke:"black",strokeWidth:0,fill:"green"}},chartArea:{left:o+"%",bottom:"10%",width:100-o-1+"%",height:"85%"},vAxis:{titleTextStyle:{color:"black"},gridlines:{color:"lightgrey"},textStyle:{color:"black"},titleTextStyle:{color:"black"},format:p},backgroundColor:"white",titleTextStyle:{color:"black"},fontName:"Consolas",hAxis:{logscale:!1,textStyle:{color:"black"},titleTextStyle:{color:"black"},gridlines:{color:"lightgrey",count:4},showTextEvery:1},crosshair:{trigger:"both"},seriesType:"area"};var U=new google.visualization.ComboChart(document.getElementById(t+"chart"));U.draw(d,T),updatePChange(t,a.Data[0].open)}).fail(function(){console.log("CHART API Call Failure")})}var INTERVAL_PRICES=1300,INTERVAL_CHARTS=6e4,CURRENT_COIN_NUM=0,HOME_CURRENCY="USD",CHART_TYPE="line",GRAN_HOUR=1,GRAN_DAY=2,GRAN_WEEK=3,GRAN_MONTH=4,GRAN_YEAR=5,GRAN_ALL_TIME=6,GRANULARITY=GRAN_HOUR,percentFormatter=new Intl.NumberFormat("percent",{style:"percent",minimumFractionDigits:3,maximumFractionDigits:3}),pageInt,chartInt,callback=JSON.parse("{}");callback.btc=!0,callback.ltc=!0,callback.eth=!0,google.charts.setOnLoadCallback(function(){startUp()});
