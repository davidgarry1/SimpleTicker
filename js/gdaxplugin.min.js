function w(){var t,e,o=1300,a=6e4,i=0,l="USD",b="line",r="BTC",n=1,c=2,s=3,m=4,h=5,C=6,p=n,u=["btc","bch","eth","ltc"],d=new Intl.NumberFormat("percent",{style:"percent",minimumFractionDigits:3,maximumFractionDigits:3}),y=JSON.parse("{}");$.each(u,function(t,e){y[e]=!0});var g=[];function v(){f(),clearInterval(t),A(!0),t=setInterval(function(){A(!1)},o)}function f(){clearInterval(e),R(!0),e=setInterval(function(){R(!1)},a)}function k(){console.log("NEXT CHART LOAD SET FROM LOCAL CACHE"),$.each(u,function(t,e){D(e,l,g[e])})}function T(o,a){var i=2;"btc"!=o.toLowerCase()&&"GBP"==a&&(a="BTC",i=7),"bch"==o.toLowerCase()&&(a="USD",i=2),$.getJSON("https://api.gdax.com/products/"+o.toUpperCase()+"-"+a.toUpperCase()+"/ticker",function(t){console.log("PRICE UPDATE: "+o.toUpperCase()+"-"+a.toUpperCase());var e=new Intl.NumberFormat("en-US",{style:"currency",currency:a,minimumFractionDigits:i,maximumFractionDigits:i});$("#"+o.toLowerCase()+"price").html(e.format(t.price)),o.toUpperCase()==r&&(document.title=e.format(t.price)+"-"+o.toUpperCase()+" | Simple Ticker")}).fail(function(){console.error("Too many requests to GDAX API")})}function U(t,e){$("#"+t).removeClass("red").removeClass("green"),0<=e?$("#"+t).addClass("green"):$("#"+t).addClass("red")}function A(t){t?$.each(u,function(t,e){T(e,l)}):(++i>u.length&&(i=1),T(u[i-1],l))}function R(o){$.each(u,function(t,e){!function(e,o,t){t&&S(e);$.getJSON(function(t,e){var o;"btc"!=t.toLowerCase()&&"GBP"==e&&(e="BTC");"bch"==t.toLowerCase()&&(e="USD");p==n?o="https://min-api.cryptocompare.com/data/histominute?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=60&aggregate=1&e=Coinbase":p==c?o="https://min-api.cryptocompare.com/data/histominute?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=96&aggregate=15&e=Coinbase":p==s?o="https://min-api.cryptocompare.com/data/histohour?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=84&aggregate=2&e=Coinbase":p==m?o="https://min-api.cryptocompare.com/data/histohour?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=90&aggregate=8&e=Coinbase":p==h?o="https://min-api.cryptocompare.com/data/histoday?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=73&aggregate=5&e=Coinbase":p==C&&(o="https://min-api.cryptocompare.com/data/histoday?fsym="+t.toUpperCase()+"&tsym="+e.toUpperCase()+"&limit=100&aggregate=15&e=Coinbase");return o}(e,o),function(t){console.log("CHART UPDATE: "+e.toUpperCase()+"-"+o.toUpperCase()),"Success"==t.Response?(g[e]=t,D(e,o,t)):console.error("CHART API Call Returned: "+t.Response)}).fail(function(){console.error("CHART API Call Failed to Return")})}(e,l,o)})}function S(t){document.getElementById(t+"chart").innerHTML=" Loading...",$("#"+t+"open").html("..."),$("#"+t+"high").html("..."),$("#"+t+"low").html("..."),$("#"+t+"vol").html("..."),$("#"+t+"open").removeClass("red"),$("#"+t+"open").removeClass("green")}function D(t,e,o){var a=2;"btc"!=t.toLowerCase()&&"GBP"==e&&(e="BTC",a=7),"bch"==t.toLowerCase()&&(e="USD",a=2);var i=8500/$(".main-panel").width(),l=new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:a,maximumFractionDigits:a});console.log("\t\trendering "+t.toUpperCase()+"-"+e.toUpperCase());var r,n,c=[];"both"==b?c[0]=["Date","Low","Open","Close","High","Tooltip","Close"]:"candle"==b?c[0]=["Date","Low","Open","Close","High","Tooltip"]:"line"==b&&(c[0]=["Date","Close"]);var s,m=0;n=o.Data[0].low,r=o.Data[0].high;for(var h=1;h<1+o.Data.length;h++){var C=o.Data[h-1].time,p=o.Data[h-1].low;n=Math.min(n,p);var u=o.Data[h-1].high;r=Math.max(r,u);var g=o.Data[h-1].open,v=o.Data[h-1].close,f=o.Data[h-1].volumeto;m+=Number(f),"both"==b?c[h]=[0,0,0,0,0,0,0]:"candle"==b?c[h]=[0,0,0,0,0,0]:"line"==b&&(c[h]=[0,0]),c[h][0]=new Date(1e3*C),"both"==b||"candle"==b?(c[h][1]=p,c[h][2]=g,c[h][3]=v,c[h][4]=u,c[h][5]=c[h][0].toLocaleString()+": "+l.format(c[h][3]),"both"==b&&(c[h][6]=v)):"line"==b&&(c[h][1]=v)}$("#"+t+"high").html(l.format(r)),$("#"+t+"low").html(l.format(n)),$("#"+t+"vol").html(l.format(m)),s="USD"==e?"$#,###.##":"EUR"==e?"€#,###.##":"GBP"==e?"£#,###.##":e+"#,###.#######";var k=google.visualization.arrayToDataTable(c,!1);if("both"==b||"candle"==b){k.setColumnProperty(5,"role","tooltip");var T={legend:"none",bar:{groupWidth:"100%"},colors:["lightgrey","#4c77b2"],candlestick:{fallingColor:{stroke:"black",strokeWidth:0,fill:"red"},risingColor:{stroke:"black",strokeWidth:0,fill:"green"}},chartArea:{left:i+"%",bottom:"10%",width:100-i-1+"%",height:"85%"},vAxis:{titleTextStyle:{color:"black"},gridlines:{color:"lightgrey"},textStyle:{color:"black"},titleTextStyle:{color:"black"},format:s},backgroundColor:"white",titleTextStyle:{color:"black"},fontName:"Consolas",hAxis:{logscale:!1,textStyle:{color:"black"},titleTextStyle:{color:"black"},gridlines:{color:"lightgrey",count:4},showTextEvery:1},cursor:"crosshair",crosshair:{trigger:"both"},seriesType:"candlesticks",series:{1:{type:"area"}}}}else if("line"==b)T={legend:"none",bar:{groupWidth:"100%"},colors:["#4c77b2"],candlestick:{fallingColor:{stroke:"black",strokeWidth:0,fill:"red"},risingColor:{stroke:"black",strokeWidth:0,fill:"green"}},chartArea:{left:i+"%",bottom:"10%",width:100-i-1+"%",height:"85%"},vAxis:{titleTextStyle:{color:"black"},gridlines:{color:"lightgrey"},textStyle:{color:"black"},titleTextStyle:{color:"black"},format:s},backgroundColor:"white",titleTextStyle:{color:"black"},fontName:"Consolas",hAxis:{logscale:!1,textStyle:{color:"black"},titleTextStyle:{color:"black"},gridlines:{color:"lightgrey",count:4},showTextEvery:1},crosshair:{trigger:"both"},seriesType:"area"};new google.visualization.ComboChart(document.getElementById(t+"chart")).draw(k,T),function t(e,o){var a=$("#"+e+"price").text().replace(/[^0-9\.-]+/g,"");if("..."!=a){var i=Number(a)/o-1;$("#"+e+"open").html(d.format(i)),U(e+"price",i),U(e+"open",i)}else y[e]&&(y[e]=!1,setTimeout(function(){y[e]=!0,t(e,o)},100))}(t,o.Data[0].open)}google.charts.setOnLoadCallback(function(){var t;!function(){hasCookie("GRANULARITY")&&((p=getCookie("GRANULARITY"))==n?($("#activet").html("Interval: 1 Hour"),$("span.interval").html("1 Hour Stats")):p==c?($("#activet").html("Interval: 1 Day"),$("span.interval").html("1 Day Stats")):p==s?($("#activet").html("Interval: 1 Week"),$("span.interval").html("1 Week Stats")):p==m?($("#activet").html("Interval: 1 Month"),$("span.interval").html("1 Month Stats")):p==h?($("#activet").html("Interval: 1 Year"),$("span.interval").html("1 Year Stats")):p==C?($("#activet").html("Interval: All Time"),$("span.interval").html("All Time Stats")):(p=n,$("#activet").html("Interval: 1 Hour"),$("span.interval").html("1 Hour Stats")));hasCookie("ACTIVE_TAB")&&(r=getCookie("ACTIVE_TAB"),$("#activetab").html("Tab: "+r),document.title=$("#"+r.toLowerCase()+"price").html()+"-"+r+" | Simple Ticker");hasCookie("HOME_CURRENCY")&&(l=getCookie("HOME_CURRENCY"),$("#activec").html(l));hasCookie("CHART_TYPE")&&("candle"==(b=getCookie("CHART_TYPE"))?$("#activechart").html("Chart: Candlestick"):"line"==b?$("#activechart").html("Chart: Line"):"both"==b?$("#activechart").html("Chart: Combo"):(b="line",$("#activechart").html("Chart: Line")))}(),window.onresize=function(){$.each(u,function(t,e){S(e)}),clearTimeout(t),t=setTimeout(function(){k()},150)},$("#candle").click(function(){b="candle",$("#activechart").html("Chart: Candlestick"),k(),setCookie("CHART_TYPE","candle")}),$("#line").click(function(){b="line",$("#activechart").html("Chart: Line"),k(),setCookie("CHART_TYPE","line")}),$("#combo").click(function(){b="both",$("#activechart").html("Chart: Combo"),k(),setCookie("CHART_TYPE","both")}),$("#hour").click(function(){p=n,$("#activet").html("Interval: 1 Hour"),$("span.interval").html("1 Hour Stats"),f(),setCookie("GRANULARITY",n)}),$("#day").click(function(){p=c,$("#activet").html("Interval: 1 Day"),$("span.interval").html("1 Day Stats"),f(),setCookie("GRANULARITY",c)}),$("#week").click(function(){p=s,$("#activet").html("Interval: 1 Week"),$("span.interval").html("1 Week Stats"),f(),setCookie("GRANULARITY",s)}),$("#month").click(function(){p=m,$("#activet").html("Interval: 1 Month"),$("span.interval").html("1 Month Stats"),f(),setCookie("GRANULARITY",m)}),$("#year").click(function(){p=h,$("#activet").html("Interval: 1 Year"),$("span.interval").html("1 Year Stats"),f(),setCookie("GRANULARITY",h)}),$("#alltime").click(function(){p=C,$("#activet").html("Interval: All Time"),$("span.interval").html("All Time Stats"),f(),setCookie("GRANULARITY",C)}),$("#cusd").click(function(){"USD"!=l&&($.each(u,function(t,e){S(e)}),l="USD",$("#activec").html(l),v(),setCookie("HOME_CURRENCY","USD"))}),$("#ceur").click(function(){"EUR"!=l&&($.each(u,function(t,e){S(e)}),l="EUR",$("#activec").html(l),v(),setCookie("HOME_CURRENCY","EUR"))}),$("#cgbp").click(function(){"GBP"!=l&&($.each(u,function(t,e){S(e)}),l="GBP",$("#activec").html(l),v(),setCookie("HOME_CURRENCY","GBP"))}),$.each(u,function(t,e){$("#tab"+e).click(function(){r=e.toUpperCase(),$("#activetab").html("Tab: "+r),document.title=$("#"+r.toLowerCase()+"price").html()+"-"+r+" | Simple Ticker",setCookie("ACTIVE_TAB",e.toUpperCase())})}),v()})}w();
