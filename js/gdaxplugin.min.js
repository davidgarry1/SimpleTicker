function resetIntervalsAndUpdateBoth(){resetIntervalsAndUpdatePrices(),resetIntervalsAndUpdateCharts()}function resetIntervalsAndUpdatePrices(){clearInterval(pageInt),pageInt=setInterval(function(){updatePage(!1)},INTERVAL)}function resetIntervalsAndUpdateCharts(){clearInterval(chartInt),updateCharts(!0),chartInt=setInterval(function(){updateCharts(!1)},10*INTERVAL)}function updateCoin(t,e){var a=2;"ltc"!=t&&"eth"!=t||"GBP"!=e||(e="BTC",a=7),$.getJSON("https://api.gdax.com/products/"+t+"-"+e+"/ticker",function(r){var n=new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:a,maximumFractionDigits:a});$("#"+t+"price").html(n.format(r.price)),"btc"==t&&(document.title=n.format(r.price)+"-BTC | Simple Ticker")}).fail(function(){})}function changeColor(t,e){$("#"+t).removeClass("red"),$("#"+t).removeClass("green"),e>=0?$("#"+t).addClass("green"):$("#"+t).addClass("red")}function updatePage(t){times=1,t&&(times=3);for(var e=0;e<times;e++)++CURRENT_COIN_NUM>3&&(CURRENT_COIN_NUM=1),1==CURRENT_COIN_NUM?updateCoin("btc",HOME_CURRENCY):2==CURRENT_COIN_NUM?updateCoin("eth",HOME_CURRENCY):updateCoin("ltc",HOME_CURRENCY)}function updateCharts(t){t&&(firstBTCDraw=!1,firstETHDraw=!1,firstLTCDraw=!1),chartB?(setTimeout(function(){drawChart("btc",HOME_CURRENCY,t)},50),setTimeout(function(){drawChart("eth",HOME_CURRENCY,t)},1200),setTimeout(function(){drawChart("ltc",HOME_CURRENCY,t)},2400)):(setTimeout(function(){drawChart("ltc",HOME_CURRENCY,t)},50),setTimeout(function(){drawChart("eth",HOME_CURRENCY,t)},1200),setTimeout(function(){drawChart("btc",HOME_CURRENCY,t)},2400)),chartB=!chartB}function retryCharts(){priceB?(firstBTCDraw||setTimeout(function(){drawChart("btc",HOME_CURRENCY,!1)},50),firstLTCDraw||setTimeout(function(){drawChart("ltc",HOME_CURRENCY,!1)},1200),firstETHDraw||setTimeout(function(){drawChart("eth",HOME_CURRENCY,!1)},2400)):(firstBTCDraw||setTimeout(function(){drawChart("eth",HOME_CURRENCY,!1)},50),firstLTCDraw||setTimeout(function(){drawChart("ltc",HOME_CURRENCY,!1)},1200),firstETHDraw||setTimeout(function(){drawChart("btc",HOME_CURRENCY,!1)},2400)),priceB=!priceB}function updatePChange(t,e){var a=$("#"+t+"price").text().replace(/[^0-9\.-]+/g,"");if("..."!=a){var r=Number(a)/e-1;$("#"+t+"open").html(percentFormatter.format(r)),changeColor(t+"price",r),changeColor(t+"open",r)}else callback[t]&&(callback[t]=!1,setTimeout(function(){callback[t]=!0,updatePChange(t,e)},100))}function drawChart(t,e,a){clearInterval(chartInt),a&&(document.getElementById(t+"chart").innerHTML=" Loading...",$("#"+t+"open").html("..."),$("#"+t+"high").html("..."),$("#"+t+"low").html("..."),$("#"+t+"open").removeClass("red"),$("#"+t+"open").removeClass("green"));var r=2;"ltc"!=t&&"eth"!=t||"GBP"!=e||(e="BTC",r=7);var n=new Date,o=new Date(1*new Date-GRANULARITY),i="https://api.gdax.com/products/"+t+"-"+e+"/candles?start="+o.toISOString()+"&end="+n.toISOString()+"&granularity="+GRANULARITY/15e4;$.getJSON(i,function(n){var o=Math.max(10,7500/$(document).width());if(n.length<140)return void drawChart(t,HOME_CURRENCY,a);var i=new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:r,maximumFractionDigits:r});"btc"==t&&(firstBTCDraw=!0),"eth"==t&&(firstETHDraw=!0),"ltc"==t&&(firstLTCDraw=!0);var l=[];"both"==CHART_TYPE?l[0]=["Date","Low","Open","Close","High","Tooltip","Close"]:"candle"==CHART_TYPE?l[0]=["Date","Low","Open","Close","High","Tooltip"]:"line"==CHART_TYPE&&(l[0]=["Date","Close"]);var c,C;C=n[0][1],c=n[0][2],updatePChange(t,n[n.length-1][3]);for(var s=1;s<1+n.length;s++){var h=n[s-1][0],R=n[s-1][1];C=Math.min(C,R);var T=n[s-1][2];c=Math.max(c,T);var d=n[s-1][3],m=n[s-1][4];n[s-1][5];"both"==CHART_TYPE?l[s]=[0,0,0,0,0,0,0]:"candle"==CHART_TYPE?l[s]=[0,0,0,0,0,0]:"line"==CHART_TYPE&&(l[s]=[0,0]),l[s][0]=new Date(1e3*h),"both"==CHART_TYPE||"candle"==CHART_TYPE?(l[s][1]=R,l[s][2]=d,l[s][3]=m,l[s][4]=T,l[s][5]=l[s][0].toLocaleString()+": "+i.format(l[s][3]),"both"==CHART_TYPE&&(l[s][6]=m)):"line"==CHART_TYPE&&(l[s][1]=m)}$("#"+t+"high").html(i.format(c)),$("#"+t+"low").html(i.format(C));var u;"USD"==e?u="$#,###.##":"EUR"==e?u="€#,###.##":"GBP"==e?u="£#,###.##":"BTC"==e&&(u="BTC#,###.#######");var E=google.visualization.arrayToDataTable(l,!1);if("both"==CHART_TYPE||"candle"==CHART_TYPE){E.setColumnProperty(5,"role","tooltip");var v={legend:"none",bar:{groupWidth:"100%"},colors:["lightgrey","#4c77b2"],candlestick:{fallingColor:{stroke:"black",strokeWidth:0,fill:"red"},risingColor:{stroke:"black",strokeWidth:0,fill:"green"}},chartArea:{left:o+"%",bottom:"10%",width:100-o-1+"%",height:"85%"},vAxis:{titleTextStyle:{color:"black"},gridlines:{color:"lightgrey"},textStyle:{color:"black"},titleTextStyle:{color:"black"},format:u},backgroundColor:"white",titleTextStyle:{color:"black"},fontName:"Consolas",hAxis:{logscale:!1,textStyle:{color:"black"},titleTextStyle:{color:"black"},gridlines:{color:"lightgrey",count:4},showTextEvery:1},crosshair:{trigger:"both"},seriesType:"candlesticks",series:{1:{type:"area"}}}}else if("line"==CHART_TYPE)var v={legend:"none",bar:{groupWidth:"100%"},colors:["#4c77b2"],candlestick:{fallingColor:{stroke:"black",strokeWidth:0,fill:"red"},risingColor:{stroke:"black",strokeWidth:0,fill:"green"}},chartArea:{left:o+"%",bottom:"10%",width:100-o-1+"%",height:"85%"},vAxis:{titleTextStyle:{color:"black"},gridlines:{color:"lightgrey"},textStyle:{color:"black"},titleTextStyle:{color:"black"},format:u},backgroundColor:"white",titleTextStyle:{color:"black"},fontName:"Consolas",hAxis:{logscale:!1,textStyle:{color:"black"},titleTextStyle:{color:"black"},gridlines:{color:"lightgrey",count:4},showTextEvery:1},crosshair:{trigger:"both"},seriesType:"area"};var A=new google.visualization.ComboChart(document.getElementById(t+"chart"));A.draw(E,v),chartInt=setInterval(function(){updateCharts(!1)},10*INTERVAL)}).fail(function(){chartInt=setInterval(function(){updateCharts(!1)},10*INTERVAL)})}var INTERVAL=1100,CURRENT_COIN_NUM=0,HOME_CURRENCY="USD",GRANULARITY=36e5,CHART_TYPE="line";if($("#candle").click(function(){CHART_TYPE="candle",$("#activechart").html("Chart: Candlestick"),resetIntervalsAndUpdateCharts(),setCookie("CHART_TYPE","#candle")}),$("#line").click(function(){CHART_TYPE="line",$("#activechart").html("Chart: Line"),resetIntervalsAndUpdateCharts(),setCookie("CHART_TYPE","#line")}),$("#combo").click(function(){CHART_TYPE="both",$("#activechart").html("Chart: Combo"),resetIntervalsAndUpdateCharts(),setCookie("CHART_TYPE","#combo")}),$("#hour").click(function(){GRANULARITY=36e5,$("#activet").html("Interval: 1 Hour"),$("span.interval").html("1H"),resetIntervalsAndUpdateCharts(),setCookie("GRANULARITY","#hour")}),$("#day").click(function(){GRANULARITY=864e5,$("#activet").html("Interval: 1 Day"),$("span.interval").html("1D"),resetIntervalsAndUpdateCharts(),setCookie("GRANULARITY","#day")}),$("#week").click(function(){GRANULARITY=6048e5,$("#activet").html("Interval: 1 Week"),$("span.interval").html("1W"),resetIntervalsAndUpdateCharts(),setCookie("GRANULARITY","#week")}),$("#month").click(function(){GRANULARITY=2592e6,$("#activet").html("Interval: 1 Month"),$("span.interval").html("1M"),resetIntervalsAndUpdateCharts(),setCookie("GRANULARITY","#month")}),$("#year").click(function(){GRANULARITY=314496e5,$("#activet").html("Interval: 1 Year"),$("span.interval").html("1Y"),resetIntervalsAndUpdateCharts(),setCookie("GRANULARITY","#year")}),$("#cusd").click(function(){HOME_CURRENCY="USD",$("#activec").html(HOME_CURRENCY),resetIntervalsAndUpdateBoth(),setCookie("HOME_CURRENCY","#cusd")}),$("#ceur").click(function(){HOME_CURRENCY="EUR",$("#activec").html(HOME_CURRENCY),resetIntervalsAndUpdateBoth(),setCookie("HOME_CURRENCY","#ceur")}),$("#cgbp").click(function(){HOME_CURRENCY="GBP",$("#activec").html(HOME_CURRENCY),resetIntervalsAndUpdateBoth(),setCookie("HOME_CURRENCY","#cgbp")}),hasCookie("GRANULARITY")){var gr=$(getCookie("GRANULARITY"));"#hour"==gr?(GRANULARITY=36e5,$("#activet").html("Interval: 1 Hour"),$("span.interval").html("1H")):"#day"==gr?(GRANULARITY=864e5,$("#activet").html("Interval: 1 Day"),$("span.interval").html("1D")):"#week"==gr?(GRANULARITY=6048e5,$("#activet").html("Interval: 1 Week"),$("span.interval").html("1W")):"#month"==gr?(GRANULARITY=2592e6,$("#activet").html("Interval: 1 Month"),$("span.interval").html("1M")):"#year"==gr&&(GRANULARITY=314496e5,$("#activet").html("Interval: 1 Year"),$("span.interval").html("1Y"))}if(hasCookie("HOME_CURRENCY")){var hc=$(getCookie("HOME_CURRENCY"));"#cusd"==hc?HOME_CURRENCY="USD":"#ceur"==hc?HOME_CURRENCY="EUR":"#cgbp"==hc&&(HOME_CURRENCY="GBP"),$("#activec").html(HOME_CURRENCY)}if(hasCookie("CHART_TYPE")){var ct=$(getCookie("CHART_TYPE"));"#candle"==ct?(CHART_TYPE="candle",$("#activechart").html("Chart: Candlestick")):"#line"==ct?(CHART_TYPE="line",$("#activechart").html("Chart: Line")):"#combo"==ct&&(CHART_TYPE="both",$("#activechart").html("Chart: Combo"))}google.charts.setOnLoadCallback(updateCharts(!0)),$(window).resize(function(){updateCharts(!0)});var pageInt=setInterval(function(){updatePage(!1)},INTERVAL),chartInt=setInterval(function(){updateCharts(!1)},10*INTERVAL),percentFormatter=new Intl.NumberFormat("percent",{style:"percent",minimumFractionDigits:3,maximumFractionDigits:3}),chartB=!1,priceB=!1,firstBTCDraw=!1,firstETHDraw=!1,firstLTCDraw=!1,callback=JSON.parse("{}");callback.btc=!0,callback.ltc=!0,callback.eth=!0;
