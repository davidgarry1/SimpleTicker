function a(){function t(){e(),o()}function e(){clearInterval(k),k=setInterval(function(){a(!1)},s)}function o(){clearInterval(d),n(!0),d=setInterval(function(){n(!1)},10*s)}function i(t,e){var o=2;"ltc"!=t&&"eth"!=t||"GBP"!=e||(e="BTC",o=7),$.getJSON("https://api.gdax.com/products/"+t+"-"+e+"/ticker",function(i){var l=new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:o,maximumFractionDigits:o});$("#"+t+"price").html(l.format(i.price)),"btc"==t&&(document.title=l.format(i.price)+"-BTC | Simple Ticker")}).fail(function(){})}function l(t,e){$("#"+t).removeClass("red"),$("#"+t).removeClass("green"),e>=0?$("#"+t).addClass("green"):$("#"+t).addClass("red")}function a(t){times=1,t&&(times=3);for(var e=0;e<times;e++)++h>3&&(h=1),1==h?i("btc",m):2==h?i("eth",m):i("ltc",m)}function n(t){t&&(p=!1,y=!1,I=!1),T?(setTimeout(function(){c("btc",m,t)},50),setTimeout(function(){c("eth",m,t)},1200),setTimeout(function(){c("ltc",m,t)},2400)):(setTimeout(function(){c("ltc",m,t)},50),setTimeout(function(){c("eth",m,t)},1200),setTimeout(function(){c("btc",m,t)},2400)),T=!T}function r(t,e){var o=$("#"+t+"price").text().replace(/[^0-9\.-]+/g,"");if("..."!=o){var i=Number(o)/e-1;$("#"+t+"open").html(b.format(i)),l(t+"price",i),l(t+"open",i)}else R[t]&&(R[t]=!1,setTimeout(function(){R[t]=!0,r(t,e)},100))}function c(t,e,o){clearInterval(d),o&&(document.getElementById(t+"chart").innerHTML=" Loading...",$("#"+t+"open").html("..."),$("#"+t+"high").html("..."),$("#"+t+"low").html("..."),$("#"+t+"open").removeClass("red"),$("#"+t+"open").removeClass("green"));var i=2;"ltc"!=t&&"eth"!=t||"GBP"!=e||(e="BTC",i=7);var l=new Date,a=new Date(1*new Date-u),h="https://api.gdax.com/products/"+t+"-"+e+"/candles?start="+a.toISOString()+"&end="+l.toISOString()+"&granularity="+u/15e4;$.getJSON(h,function(l){var a=Math.max(10,7500/$(document).width());if(l.length<140)return void c(t,m,o);var h=new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:i,maximumFractionDigits:i});"btc"==t&&(p=!0),"eth"==t&&(y=!0),"ltc"==t&&(I=!0);var u=[];"both"==v?u[0]=["Date","Low","Open","Close","High","Tooltip","Close"]:"candle"==v?u[0]=["Date","Low","Open","Close","High","Tooltip"]:"line"==v&&(u[0]=["Date","Close"]);var g,C;C=l[0][1],g=l[0][2],r(t,l[l.length-1][3]);for(var f=1;f<1+l.length;f++){var k=l[f-1][0],b=l[f-1][1];C=Math.min(C,b);var T=l[f-1][2];g=Math.max(g,T);var R=l[f-1][3],S=l[f-1][4];l[f-1][5];"both"==v?u[f]=[0,0,0,0,0,0,0]:"candle"==v?u[f]=[0,0,0,0,0,0]:"line"==v&&(u[f]=[0,0]),u[f][0]=new Date(1e3*k),"both"==v||"candle"==v?(u[f][1]=b,u[f][2]=R,u[f][3]=S,u[f][4]=T,u[f][5]=u[f][0].toLocaleString()+": "+h.format(u[f][3]),"both"==v&&(u[f][6]=S)):"line"==v&&(u[f][1]=S)}$("#"+t+"high").html(h.format(g)),$("#"+t+"low").html(h.format(C));var x;"USD"==e?x="$#,###.##":"EUR"==e?x="€#,###.##":"GBP"==e?x="£#,###.##":"BTC"==e&&(x="BTC#,###.#######");var w=google.visualization.arrayToDataTable(u,!1);if("both"==v||"candle"==v){w.setColumnProperty(5,"role","tooltip");var A={legend:"none",bar:{groupWidth:"100%"},colors:["lightgrey","#4c77b2"],candlestick:{fallingColor:{stroke:"black",strokeWidth:0,fill:"red"},risingColor:{stroke:"black",strokeWidth:0,fill:"green"}},chartArea:{left:a+"%",bottom:"10%",width:100-a-1+"%",height:"85%"},vAxis:{titleTextStyle:{color:"black"},gridlines:{color:"lightgrey"},textStyle:{color:"black"},titleTextStyle:{color:"black"},format:x},backgroundColor:"white",titleTextStyle:{color:"black"},fontName:"Consolas",hAxis:{logscale:!1,textStyle:{color:"black"},titleTextStyle:{color:"black"},gridlines:{color:"lightgrey",count:4},showTextEvery:1},crosshair:{trigger:"both"},seriesType:"candlesticks",series:{1:{type:"area"}}}}else if("line"==v)var A={legend:"none",bar:{groupWidth:"100%"},colors:["#4c77b2"],candlestick:{fallingColor:{stroke:"black",strokeWidth:0,fill:"red"},risingColor:{stroke:"black",strokeWidth:0,fill:"green"}},chartArea:{left:a+"%",bottom:"10%",width:100-a-1+"%",height:"85%"},vAxis:{titleTextStyle:{color:"black"},gridlines:{color:"lightgrey"},textStyle:{color:"black"},titleTextStyle:{color:"black"},format:x},backgroundColor:"white",titleTextStyle:{color:"black"},fontName:"Consolas",hAxis:{logscale:!1,textStyle:{color:"black"},titleTextStyle:{color:"black"},gridlines:{color:"lightgrey",count:4},showTextEvery:1},crosshair:{trigger:"both"},seriesType:"area"};var D=new google.visualization.ComboChart(document.getElementById(t+"chart"));D.draw(w,A),d=setInterval(function(){n(!1)},10*s)}).fail(function(){d=setInterval(function(){n(!1)},10*s)})}var s=1100,h=0,m="USD",u=36e5,v="line";if($("#candle").click(function(){v="candle",$("#activechart").html("Chart: Candlestick"),o(),setCookie("CHART_TYPE","#candle")}),$("#line").click(function(){v="line",$("#activechart").html("Chart: Line"),o(),setCookie("CHART_TYPE","#line")}),$("#combo").click(function(){v="both",$("#activechart").html("Chart: Combo"),o(),setCookie("CHART_TYPE","#combo")}),$("#hour").click(function(){u=36e5,$("#activet").html("Interval: 1 Hour"),$("span.interval").html("1H"),o(),setCookie("GRANULARITY","#hour")}),$("#day").click(function(){u=864e5,$("#activet").html("Interval: 1 Day"),$("span.interval").html("1D"),o(),setCookie("GRANULARITY","#day")}),$("#week").click(function(){u=6048e5,$("#activet").html("Interval: 1 Week"),$("span.interval").html("1W"),o(),setCookie("GRANULARITY","#week")}),$("#month").click(function(){u=2592e6,$("#activet").html("Interval: 1 Month"),$("span.interval").html("1M"),o(),setCookie("GRANULARITY","#month")}),$("#year").click(function(){u=314496e5,$("#activet").html("Interval: 1 Year"),$("span.interval").html("1Y"),o(),setCookie("GRANULARITY","#year")}),$("#cusd").click(function(){m="USD",$("#activec").html(m),t(),setCookie("HOME_CURRENCY","#cusd")}),$("#ceur").click(function(){m="EUR",$("#activec").html(m),t(),setCookie("HOME_CURRENCY","#ceur")}),$("#cgbp").click(function(){m="GBP",$("#activec").html(m),t(),setCookie("HOME_CURRENCY","#cgbp")}),hasCookie("GRANULARITY")){var g=$(getCookie("GRANULARITY"));"#hour"==g?(u=36e5,$("#activet").html("Interval: 1 Hour"),$("span.interval").html("1H")):"#day"==g?(u=864e5,$("#activet").html("Interval: 1 Day"),$("span.interval").html("1D")):"#week"==g?(u=6048e5,$("#activet").html("Interval: 1 Week"),$("span.interval").html("1W")):"#month"==g?(u=2592e6,$("#activet").html("Interval: 1 Month"),$("span.interval").html("1M")):"#year"==g&&(u=314496e5,$("#activet").html("Interval: 1 Year"),$("span.interval").html("1Y"))}if(hasCookie("HOME_CURRENCY")){var C=$(getCookie("HOME_CURRENCY"));"#cusd"==C?m="USD":"#ceur"==C?m="EUR":"#cgbp"==C&&(m="GBP"),$("#activec").html(m)}if(hasCookie("CHART_TYPE")){var f=$(getCookie("CHART_TYPE"));"#candle"==f?(v="candle",$("#activechart").html("Chart: Candlestick")):"#line"==f?(v="line",$("#activechart").html("Chart: Line")):"#combo"==f&&(v="both",$("#activechart").html("Chart: Combo"))}google.charts.setOnLoadCallback(n(!0)),$(window).resize(function(){n(!0)});var k=setInterval(function(){a(!1)},s),d=setInterval(function(){n(!1)},10*s),b=new Intl.NumberFormat("percent",{style:"percent",minimumFractionDigits:3,maximumFractionDigits:3}),T=!1,p=!1,y=!1,I=!1,R=JSON.parse("{}");R.btc=!0,R.ltc=!0,R.eth=!0}a();
